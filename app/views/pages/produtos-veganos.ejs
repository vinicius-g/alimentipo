<!DOCTYPE html>
<html lang="pt-br">

<head>
    <%- include("../templates/head.ejs") %>
    <link rel="stylesheet" href="/css/resultado-busca.css">

    <title><%- data.page_name %></title>
</head>

<body>
    <%- data.usuarioLogado ? include("../templates/header-cadastrado.ejs") : include("../templates/header.ejs") %>

    <main>
        <section>
            <div class="searchbar">
                <img src="/imagem/pesquisa.png" alt="Pesquisa">
                <input type="search" id="searchbar">
            </div>

            <h1>Vegano</h1>

            <div id="produtos">
                <% data.produtos.forEach(produto => { %>
                <a href="/produto/<%- produto.id_produto %>" class="produto">
                    <div class="produto-imagem">
                        <button class="favoritar">
                            <img src="/imagem/favoritar.png" alt="Favorito">
                        </button>

                        <img src="/imagem/produto/<%- produto.id_produto %>" alt="<%- produto.nome_produto %>">
                    </div>

                    <div class="produto-texto">
                        <h2><%- produto.nome_produto %></h2>

                        <h3><% produto.restricoes.forEach(restricao => { %>
                            <%- restricao.restricao.nome_restricao %>
                            <% }) %></h3>

                        <p>R$ <%- produto.preco_produto %></p>
                    </div>
                </a>
                <% }) %>
            </div>

            <% if (data.quantidadePaginas > 1) { %>
            <div class="paginacao">
                <% for(let index = data.paginaAtual; index <= data.quantidadePaginas; index++) { %>
                    <% if (index === data.paginaAtual) { %>
                        <a href="<%- index %>" class="ativo"><%- index %></a>
                    <% } else { %>
                        <a href="<%- index %>"><%- index %></a>
                    <% } %>
                <% } %>
            </div>
            <% } %>
        </section>
    </main>

    <%- include("../templates/footer.ejs") %>

</body>

</html>